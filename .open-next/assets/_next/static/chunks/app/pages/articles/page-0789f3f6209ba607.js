(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{2081:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var l=s(5155),a=s(2238),r=s(2590),i=s(9150),n=s(7847),c=s(5239),o=s(2115),m=s(5069),d=s(2619),u=s.n(d);function x(){let[e,t]=(0,o.useState)([]),[s,d]=(0,o.useState)({page:1,pageSize:5,pageCount:1,total:0}),[x,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!0),f=(0,n.zh)({from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"},config:{tension:200,friction:20},reset:!0}),j=async e=>{p(!0);try{let s=await m.u.get("/api/articles?populate=*",{params:{"pagination[page]":e,"pagination[pageSize]":5}}),l=s.data,a=s.meta.pagination;t(t=>1===e?l:[...t,...l]),d(a),g(a.page<a.pageCount),console.log("文章数据:",s)}catch(e){console.error("加载文章失败:",e)}finally{p(!1)}};return(0,o.useEffect)(()=>{j(1)},[]),(0,l.jsx)("div",{className:"container mx-auto mt-[-60] px-4 py-4  max-md:w--96 max-md:h-full",children:(0,l.jsx)(a.r,{"aria-label":"Options",color:"primary",className:"w-full",children:(0,l.jsxs)(r.i,{title:"全部",children:[(0,l.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t;return(0,l.jsxs)("article",{className:"bg-white rounded-lg sm:rounded-xl h-auto min-h-[140px] sm:h-36 transition-all duration-300 overflow-hidden flex flex-col sm:flex-row lg:mb-4 sm:gap-3 p-3 sm:p-4 ",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-full sm:w-auto",children:(0,l.jsx)(n.CS.div,{style:f,className:"w-full h-36 sm:w-28 sm:h-28 md:w-32 md:h-32 lg:w-36 lg:h-28 rounded-lg overflow-hidden relative",children:(0,l.jsx)(c.default,{src:(()=>{var t,s,l,a,r,i,n;let c=(null==(l=e.articleCover)||null==(s=l.formats)||null==(t=s.medium)?void 0:t.url)||(null==(i=e.articleCover)||null==(r=i.formats)||null==(a=r.small)?void 0:a.url)||(null==(n=e.articleCover)?void 0:n.url);return(null==c?void 0:c.startsWith("/uploads/"))?"".concat("http://www.zaocn.top").concat(c):c||""})(),alt:e.articleName,fill:!0,className:"object-cover",unoptimized:!0,onError:t=>{var s;console.error("文章封面加载失败:",null==(s=e.articleCover)?void 0:s.url),t.target.src="/Banner.jpg"}})})}),(0,l.jsxs)(n.CS.div,{style:f,className:"flex-1 flex flex-col justify-between mt-3 sm:mt-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u(),{href:"/pages/articles/".concat(e.documentId),children:(0,l.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl mb-1 sm:mb-2 line-clamp-2 font-medium text-gray-800",children:e.articleName})},e.documentId),(0,l.jsx)("time",{className:"text-xs sm:text-sm text-gray-500 mb-2 block",children:e.artileTime}),(0,l.jsx)("p",{className:"text-sm sm:text-base text-gray-600 line-clamp-2 leading-relaxed hidden sm:block",children:e.artilceDesc})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs sm:text-sm mt-3",children:[(0,l.jsx)("span",{className:"text-purple-600 font-medium",children:(null==(t=e.sort)?void 0:t.sortsName)||"未分类"}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-gray-500",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(i.wCM,{size:14})," 0"]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(i.T6j,{size:14})," 0"]})]})]})]})]},e.id)})}),h&&(0,l.jsx)("div",{className:"text-center mt-8",children:(0,l.jsx)("button",{onClick:()=>{!x&&h&&j(s.page+1)},disabled:x,className:"px-8 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:x?"加载中...":"加载更多"})}),!h&&e.length>0&&(0,l.jsx)("div",{className:"text-center mt-8 text-gray-500",children:"—— 没有更多文章了 ——"}),0===e.length&&!x&&(0,l.jsx)("div",{className:"text-center py-12 text-gray-500",children:"暂无文章"})]},"quan")})})}},5069:(e,t,s)=>{"use strict";s.d(t,{u:()=>a});var l=s(5125);let a=(e=>{let t=l.A.create({baseURL:e,timeout:1e4,headers:{"Content-Type":"application/json"}});return t.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e.data,e=>(console.error("API Error:",e),Promise.reject(e))),t})("http://www.zaocn.top")},8277:(e,t,s)=>{Promise.resolve().then(s.bind(s,2081))}},e=>{e.O(0,[823,589,125,847,7,239,357,276,427,339,441,255,358],()=>e(e.s=8277)),_N_E=e.O()}]);